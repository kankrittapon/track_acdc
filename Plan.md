1. ทิศทางของทุ่น (Rounding Direction)ทุ่นในโปรแกรมนี้ไม่ได้มี "หัวเรือ" (Heading) แต่มี "ทิศทางการอ้อม" ที่ถูกกำหนดไว้ในระบบครับ:Mark 1 / 1A (Windward Marks): \* ในข้อมูลระบุว่าเป็น "Detour Left": หมายถึงเป็นทุ่นที่ต้อง "อ้อมซ้าย" (Port Rounding) เสมอ เรือต้องวิ่งให้ทุ่นอยู่ทางกราบซ้ายของเรือตอนเลี้ยวทิศทางเชิงพิกัด: Mark 1A มักจะวางอยู่ถัดจาก Mark 1 เพื่อยืดระยะทาง (Offset Mark) ให้เรือมีพื้นที่ในการเปลี่ยนใบก่อนวิ่งลงลม (Downwind)Mark 4p / 4s (Gate Marks):4p (Port Gate): ทุ่นฝั่งซ้าย (อ้อมซ้าย)4s (Starboard Gate): ทุ่นฝั่งขวา (อ้อมขวา)ทิศทาง: ทุ่นคู่นี้สร้างเป็น "ประตู" (Gate) เรือจะวิ่งลงมาจากข้างบนและ ลอดผ่านกลางทุ่นทั้งสอง แล้วเลือกอ้อมทุ่นใดทุ่นหนึ่งเพื่อกลับขึ้นไปที่ทุ่น 1 ใหม่
2. จุด Start และ Finish กำหนดค่ายังไง?ในระบบ GPS Tracking ของเรือใบ จุดเหล่านี้ไม่ใช่แค่จุดพิกัดเดียว แต่เป็น "เส้น" (Line) ครับ:การกำหนดค่า: ระบบจะรับค่าพิกัด $2$ จุด (Lat/Long) เพื่อสร้างเส้นตรงสมมติขึ้นมาStart Line: มักจะขึงระหว่างทุ่นฝั่งหนึ่ง (Pin End) กับเสาสัญญาณบนเรือกรรมการ (Committee Boat)Finish Line: เช่นเดียวกัน อาจจะเป็นเส้นเดียวกับจุด Start หรือแยกออกมาLogical Value: ในโค้ดที่คุณให้มา sf-mark-title ที่ชื่อ "Start" จะมีพิกัด translate3d เฉพาะตัว ซึ่งระบบจะเช็คว่า "พิกัดเรือ (GPS) ตัดผ่านเส้น (Line) นี้หรือยัง" ในเวลาที่กำหนด เพื่อคำนวณเวลา OCS (ออกตัวก่อนสัญญาณ) หรือเวลาเข้าเส้นชัย
3. ลำดับการอ้อมทุ่น (Race Legs)จากแถบ Playbar ในข้อมูลของคุณ เรือวิ่งตามลำดับ (Legs) ดังนี้ครับ:Start (00:00): เรือออกตัววิ่ง ทวนลม (Upwind)Mark 1 & 1A (13:25 - 13:49): อ้อมทุ่นด้านบน (Windward) เลี้ยวซ้ายเพื่อวิ่ง ตามลม (Downwind)Mark 4s (21:42): วิ่งลงมาถึงประตู (Gate) แล้วเลือกอ้อมทุ่น 4s เพื่อเริ่มรอบที่ 2Mark 1 & 1A (34:38 - 35:03): กลับขึ้นไปอ้อมทุ่นด้านบนอีกครั้งเป็นรอบที่ 2Finish (42:38): วิ่งกลับลงมาเข้าเส้นชัยสรุปจำนวน Mark ในข้อมูลนี้มีทุ่นทั้งหมดที่ระบบ Tracking ตรวจจับอยู่ 6 จุดหลัก (ไม่นับพิกัดเรือ):ประเภท Markชื่อในระบบหน้าที่ทิศทางบังคับ
   Start Line Start (2 จุด) จุดเริ่มต้น ตัดผ่านเส้น
   Windward Mark1ทุ่นหลักด้านบนอ้อมซ้าย (Port)
   Offset Mark1Aทุ่นช่วยเลี้ยวอ้อมซ้าย (Port)
   Gate Starboard4sประตูล่าง (ขวา)อ้อมขวา (Starboard)
   Gate Port4pประตูล่าง (ซ้าย)อ้อมซ้าย (Port)
   Finish LineFinishเส้นชัยตัดผ่านเส้น

4. รูปแบบสนาม: Windward-Leeward (ทวนลม-ตามลม)สนามแข่งจะไม่ได้เป็นวงกลม แต่เป็น "แนวเส้นตรง" ที่วางขนานกับทิศทางลมครับขาขึ้น (Upwind): วิ่งจากจุด Start ไปหาทุ่น 1 (ทวนลม)ขาลง (Downwind): วิ่งจากทุ่น 1 กลับลงมาหาทุ่น Gate (ตามลม)
5. ลำดับการเข้าทุ่น (Race Sequence)จากข้อมูล data-time ใน Playbar ลำดับจะเป็นแบบนี้ครับ:Start: ออกตัวจากเส้น Startทุ่น 1 & 1A (รอบแรก): วิ่งทวนลมขึ้นไปอ้อม (ใช้เวลาประมาณ 13 นาที)ทุ่น Gate (4s หรือ 4p): วิ่งตามลมกลับลงมาอ้อมทุ่นด้านล่าง แต่ไม่ได้กลับไปที่เส้น Start นะครับ เขาจะอ้อมทุ่น Gate เพื่อ "วนกลับขึ้นไป" ทันทีทุ่น 1 & 1A (รอบสอง): วิ่งทวนลมกลับขึ้นไปเก็บรอบที่ 2Finish: หลังจากอ้อมทุ่น 1 รอบสุดท้ายเสร็จ เขาจะพุ่งลงมาที่ เส้น Finish ครับจุดสังเกต: ในการแข่งจริง เส้น Start กับ Gate มักจะอยู่ใกล้กันมาก แต่ในเชิง Logic ของโปรแกรม เส้น Finish อาจจะวางไว้คนละจุด หรือเป็นเส้นเดียวกับ Start ก็ได้ (แต่ใน HTML นี้ดูเหมือนจะเป็นคนละพิกัดกันครับ)
6. สรุปภาพรวมเส้นทางถ้าเขียนเป็น Flow จะเป็นแบบนี้:$$Start \rightarrow (1 \rightarrow 1A) \rightarrow (4s/4p) \rightarrow (1 \rightarrow 1A) \rightarrow Finish$$ทำไมต้องมี 1A? เพื่อกันไม่ให้เรือที่กำลังวิ่งขึ้น (ทวนลม) กับเรือที่กำลังวิ่งลง (ตามลม) ชนกันตรงทุ่น 1 ครับ (เหมือนวงเวียนเล็กๆ)ทำไมต้องมี Gate (4s/4p)? เพื่อให้เรือเลือกได้ว่าจะอ้อมซ้ายหรือขวาตามแทคติกของลมในตอนนั้นครับ
7. การตั้งค่าในระบบ Tracking
   ถ้าคุณกำลังจะทำแอปฯ ให้สมาคมเรือใบ ข้อมูลที่ต้องดึงจาก HTML มาใช้คือ:

Target Buoy: ระบบจะเปลี่ยนเป้าหมายไปเรื่อยๆ (เช่น พอผ่าน Start เป้าหมายต่อไปคือ Mark 1)

Legs: ในโค้ดระบุว่ามี 6 Leg หมายความว่าอาจมีการวิ่งขึ้น-ลง 3 รอบ หรือ 2 รอบครึ่งแล้วจบครับ

Completed (%): ระบบจะคำนวณจากระยะทางที่เรืออยู่ห่างจากทุ่นถัดไปเทียบกับระยะทางทั้งหมด

1. ลำดับการวิ่งแบบ 4 รอบ (8 Legs)ในระบบซอฟต์แวร์ จะนับการวิ่ง "ขึ้น" หรือ "ลง" แต่ละครั้งเป็น 1 Leg ดังนั้นถ้าวิ่ง 4 รอบ จะมีทั้งหมด 8-9 Legs ขึ้นอยู่กับว่าจุด Finish อยู่ตรงไหน:รอบที่ 1: Start $\rightarrow$ Mark 1/1A (Leg 1) $\rightarrow$ Gate 4s/4p (Leg 2)รอบที่ 2: Gate $\rightarrow$ Mark 1/1A (Leg 3) $\rightarrow$ Gate 4s/4p (Leg 4)รอบที่ 3: Gate $\rightarrow$ Mark 1/1A (Leg 5) $\rightarrow$ Gate 4s/4p (Leg 6)รอบที่ 4: Gate $\rightarrow$ Mark 1/1A (Leg 7) $\rightarrow$ Finish (Leg 8)ข้อสังเกต: ในข้อมูล HTML ที่คุณส่งมา ตรงส่วน sf-event-leg ระบุ data-total="6" นั่นหมายความว่าในไฟล์นั้นตั้งค่าไว้แค่ 3 รอบ (6 Legs) แต่ถ้าหน้างานจริงแข่ง 4 รอบ ค่าตัวเลขนี้ในระบบหลังบ้านจะถูกเปลี่ยนเป็น 8 หรือ 10 ครับ
2. การแยกแยะ "ทุ่นเดิมแต่รอบต่างกัน"สิ่งที่เป็นความท้าทายในการเขียนโปรแกรมคือ ทุ่นมันอยู่ที่พิกัดเดิม (Lat/Long เดิม) แล้วระบบรู้ได้ยังไงว่าเรืออ้อมทุ่น 1 ของรอบที่ 1 หรือรอบที่ 4 แล้ว?ในเชิง Logic ของ Developer เขาจะใช้ระบบ "Check-in Sequence" ครับ:State Machine: ระบบจะมีสถานะปัจจุบัน เช่น target_mark: 1, current_round: 1Geofencing: เมื่อพิกัดเรือเข้าไปในรัศมี (Radius) ที่กำหนด (เช่น 24 เมตรจาก Mark 1) และเรือมีการเปลี่ยนทิศทาง (Heading) ตามที่กำหนด ระบบจะ Update สถานะเป็น target_mark: 4, leg: 2Counter: ระบบจะบวกเลขรอบไปเรื่อยๆ จนกว่าจะครบตามค่า data-total ที่ตั้งไว้ในหัวข้อการแข่งขันครับ
3. จุด Finish ในรอบสุดท้ายโดยปกติการแข่ง 4 รอบ จุด Finish มักจะอยู่ได้ 2 ที่ ขึ้นอยู่กับกรรมการ:Downwind Finish: วิ่งลงจากทุ่น 1 รอบสุดท้ายแล้วพุ่งเข้าเส้นชัยที่วางไว้แถวๆ จุด Start (นิยมที่สุด)Upwind Finish: วิ่งจากทุ่น Gate รอบที่ 4 แล้วกลับขึ้นไปเข้าเส้นชัยที่วางไว้แถวๆ ทุ่น 1
4. สรุปความแตกต่างของวัตถุแต่ละรอบรอบที่เป้าหมายทวนลม (Upwind)เป้าหมายตามลม (Downwind)1วิ่งหา Mark 1 ครั้งแรก (ตื่นเต้นสุด เรือยังเกาะกลุ่ม)วิ่งหา Gate เพื่อเลือกทางแยก2-3วิ่งวนใน Track เดิม (เน้นรักษาระยะห่าง/แซง)วิ่งวนลงมาที่ Gate4 (สุดท้าย)อ้อม Mark 1 รอบสุดท้ายเปลี่ยนเป้าหมายจาก Gate เป็น Finish Line

มุมมองนักพัฒนา (Developer Note): ถ้าคุณกำลังพัฒนาแอปฯ หรือระบบ Tracking ให้สมาคมฯ สิ่งที่ต้องระวังที่สุดคือ "การเผลอนับรอบซ้ำ" หากเรือวิ่งส่ายไปมาใกล้ๆ ทุ่นเดิมครับ คุณต้องเขียน Logic ให้มัน "Lock" เป้าหมายถัดไปทันทีหลังจากที่ Check-in ทุ่นปัจจุบันสำเร็จแล้วเท่านั้น
